{"mappings":"0eAAMA,cAKQC,EAAiBC,QACtBC,GAAKD,OACLE,QAAUH,OACVI,SAAU,SAIbC,EAAK,CACTC,KAAMC,KAAKC,MAAMC,aAAaC,QAAO,WAAQ,GAC7CC,UAAS,GAETC,uBACcN,MAGdO,SAASP,QACFA,KAAOA,EACZG,aAAaK,QAAO,QAAUP,KAAKQ,UAASC,KAAMV,iBACvCW,KAAED,KAASL,UACpBM,KAIJC,WAAWf,SACHgB,EAAI,IAAOpB,EAAMI,EAAOa,KAAOI,SAC/Bd,EAAIU,KAAQJ,WAClBN,EAAKe,KAAKF,QACLN,SAASP,IAGhBgB,WAAWpB,SACHqB,EAAQP,KAAQJ,WAAWY,QAAQC,GAASA,EAAKvB,KAAOA,SACzDW,SAASU,IAGhBG,YAAYxB,EAAYyB,SAChBC,EAASZ,KAAQV,KAAKkB,QAAQC,GAASA,EAAKvB,KAAOA,QACrDwB,EAAWV,KAAQV,KAAKuB,MAAMJ,GAASA,EAAKvB,KAAOA,IACvDwB,EAAYtB,QAAUuB,QAChBJ,EAAWK,EAAUE,OAAOJ,QAC7Bb,SAASU,IAGhBH,YACMW,UACKnB,WAAWoB,OAAS,EAC3BD,EAAK,WAEDE,EAAQjB,KAAkBJ,WAAWsB,KAAKT,GAASA,EAAKvB,WACtDiC,EAAMC,KAAKD,OAAOF,GACxBF,EAAKI,EAAM,cAEJvB,WAAWsB,KAAKT,GAASA,EAAKvB,KAAO6B,KAC5CA,IAEKA,GAGTM,SAASC,QACF3B,UAAUU,KAAKiB,gLC9DO,IAC3BC,EAAY,cAwBPC,EAAWC,aACLA,GAAKC,QAAO,wCAAA,MAA8C,IAczEC,oBApCOJ,IACHA,2BAQUK,YACHC,OACHC,GAAO,GAASD,EAAIE,OAAOC,MAAK,qCAEhCF,EAAO,OACFN,EAAWM,EAAQ,cAbhBG,IAGPV,MCVTW,EAAiBC,EAAA,SAAAC,eAAoC,2DCEjDC,EAAYhD,EAAMO,oBAEN0C,EAASC,OACnB3B,EAAY2B,EAAO3B,UACvBA,EAAYA,EAAU4B,MAAI,CAAEC,EAAGC,IACzBD,EAAErD,QAAUsD,EAAEtD,QACT,EAELqD,EAAErD,QAAUsD,EAAEtD,SACT,EAEF,UAGHuD,EAAMC,SAASC,cAAa,OAClCF,EAAIG,UAAS,iBACPC,EAAQH,SAASC,cAAa,SACpCE,EAAMC,YAAW,2KAUXC,EAAQrC,EAAUM,KACrBT,GAAI,0BACcA,EAAKvB,gBAAgBuB,EAAKrB,YAAYqB,EAAKtB,mCAGhEwD,EAAIO,UAAYD,EAAME,KAAI,IAC1BR,EAAIS,YAAYL,GAETJ,EAGTtD,EAAMgC,UAAQ,QACRgB,IAAchD,EAAMO,WAAQ,OACxByD,EAAYT,SAASU,cAAa,SACxCD,EAAUE,YAAYC,SACtBH,EAAUD,YAAYd,EAAQ,CAAG1B,UAAWvB,EAAMO,wBCzChD6D,EAAM,EAERC,KAAI,gBACJC,UAAWrB,cAIYe,YAMhBO,EAAYC,aACRC,KAAKL,EAAM,GAChBK,EAAEJ,KAAKK,KAAKF,GAAK,OACbG,EAAKF,EAAEH,UAAS,CAAG/C,UAAWvB,EAAMO,aAEtCyD,EAAUE,YACZF,EAAUE,WAAWC,SAGvBH,EAAUD,YAAYY,QAddN,EAmBO,gBAAjBO,SAASC,UAnBCR,EAoBR,eAnBJS,QAAQC,UAAS,MAASV,GAC1BE,EAAYF,IAoBZE,EAAYK,SAASC,UAEvBG,OAAOC,WAAU,SAAaC,GAC5BX,EAAYK,SAASC,WC9BvBM,CAAW5B,SAASU,cAAa,2BCF3BmB,UAAaC,0BAMfC,aAJFC,OAAM5E,KAAa6E,aAAY,CAAGC,KAAI,cAK/BC,aAGDhC,EAAQH,SAASC,cAAa,SAClCE,EAAMC,YAAW,s5BA2CZ4B,OAAOxB,YAAYL,GAG1BgC,eACQC,EAAOpC,SAASC,cAAa,OAE7B+B,EAAM5E,KAAQ4E,OACdK,EAAIjF,KAAQgD,YACZ9D,EAAEc,KAAQkF,aAAY,MACtBC,EAAKnF,KAAQkF,aAAY,eAE3BE,EAEFA,EADO,QAALD,EACY,UAEA,OAGhBH,EAAKK,UAAUC,IAAG,QAClBN,EAAKO,aAAY,KAAOrG,GAGxB8F,EAAK9B,UAAS,iCACU+B,uGAE0BG,6DAEnClD,qDAKTsD,EAAWR,EAAK1B,cAAa,mBAE1B,SAAL6B,EACFH,EAAK1B,cAAa,eAAgB+B,UAAUC,IAAG,aACjC,UAALH,GACTH,EAAK1B,cAAa,eAAgB+B,UAAU7B,OAAM,aAGpDgC,EAASC,iBAAgB,UAAS,SAAYC,GAC5CV,EAAK1B,cAAa,eAAgB+B,UAAUM,OAAM,aAClDtG,EAAMqB,YAAYkF,OAAO1G,GAAEc,KAAQZ,YAGrC4F,EAAKS,iBAAgB,SAAWC,IAC9BV,EAAK1B,cAAa,gBAAiB+B,UAAUM,OAAM,cACnDX,EAAKK,UAAUM,OAAM,kBAGvBX,EAAK1B,cAAa,gBAAiBmC,iBAAgB,SAAQ,KACzDpG,EAAMiB,WAAWsF,OAAO1G,OAG1B0F,EAAOxB,YAAY4B,IAGvBa,eAAeC,OAAM,YAAcrB,GD5GnCsB,GAEAnD,SAASU,cAAa,kBAAmBmC,iBAAgB,UAAYC,IACnEA,EAAEM,uBACIrF,EAAQ+E,EAAEO,OAAO,GAAGtF,MAC1BtB,EAAMa,WAAWS,GACjB+E,EAAEO,OAAO,GAAGtF,MAAK","sources":["src/state.ts","node_modules/@parcel/runtime-js/lib/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-49e45666e4e3569e7dbf05fd4dd3efb6.js","src/pages/page.ts","src/router.ts","src/index.ts","src/components/cards/index.ts"],"sourcesContent":["class Notes {\n  id: number;\n  content: string;\n  checked: boolean;\n\n  constructor(content: string, id: number) {\n    this.id = id;\n    this.content = content;\n    this.checked = false;\n  }\n}\n\nconst State = {\n  data: JSON.parse(localStorage.getItem(\"notes\")) || [],\n  listeners: [],\n\n  getState(): Notes[] {\n    return this.data;\n  },\n\n  setState(data: Notes[]) {\n    this.data = data;\n    localStorage.setItem(\"notes\", JSON.stringify(this.data));\n    for (const cb of this.listeners) {\n      cb();\n    }\n  },\n\n  addNewNote(content: string) {\n    const note = new Notes(content, this.idGen());\n    const data = this.getState();\n    data.push(note);\n    this.setState(data);\n  },\n\n  deleteNote(id: number) {\n    const newState = this.getState().filter((item) => item.id !== id);\n    this.setState(newState);\n  },\n\n  checkedNote(id: number, value: boolean) {\n    const lastState = this.data.filter((item) => item.id !== id);\n    let checkedNote = this.data.find((item) => item.id === id);\n    checkedNote.checked = value;\n    const newState = lastState.concat(checkedNote);\n    this.setState(newState);\n  },\n\n  idGen() {\n    let id: number;\n    if (this.getState().length < 1) {\n      id = 1;\n    } else {\n      let idValues: number[] = this.getState().map((item) => item.id);\n      const max = Math.max(...idValues);\n      id = max + 1;\n    }\n    if (this.getState().map((item) => item.id === id)) {\n      id++;\n    }\n    return id;\n  },\n\n  suscribe(callback: (any) => any) {\n    this.listeners.push(callback);\n  },\n};\n\nexport { State };\n","\"use strict\";\n\n/* globals document:readonly */\nvar bundleURL = null;\n\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  let matches = ('' + url).match(/(https?|file|ftp):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","module.exports = require('./bundle-url').getBundleURL() + \"delete.02d7e755.svg\"","import { State } from \"../state\";\n\nlet lastState = State.getState();\n\nexport function rootPage(params) {\n  let lastState = params.lastState;\n  lastState = lastState.sort((a, b) => {\n    if (a.checked > b.checked) {\n      return 1;\n    }\n    if (a.checked < b.checked) {\n      return -1;\n    }\n    return 0;\n  });\n\n  const div = document.createElement(\"div\");\n  div.className = \"card-box\";\n  const style = document.createElement(\"style\");\n  style.textContent = `\n    .card-box{\n      display: flex;\n      flex-direction: row;\n      flex-wrap: wrap;\n      margin: 0 20px;\n      justify-content: space-around;\n    }\n  `;\n\n  const lista = lastState.map(\n    (item) => `\n      <card-note id=\"${item.id}\" checked=\"${item.checked}\">${item.content}</card-note>\n  `\n  );\n  div.innerHTML = lista.join(\"\");\n  div.appendChild(style);\n\n  return div;\n}\n\nState.suscribe(() => {\n  if (lastState !== State.getState()) {\n    const container = document.querySelector(\"#root\");\n    container.firstChild?.remove();\n    container.appendChild(rootPage({ lastState: State.getState() }));\n  }\n});\n","import { rootPage } from \"./pages/page\";\nimport { State } from \"./state\";\n\nconst routes = [\n  {\n    path: /\\/web-storage/,\n    component: rootPage,\n  },\n];\n\nexport function initRouter(container: Element) {\n  function goTo(path) {\n    history.pushState({}, \"\", path);\n    handleRoute(path);\n  }\n\n  function handleRoute(route: any) {\n    for (const r of routes) {\n      if (r.path.test(route)) {\n        const el = r.component({ lastState: State.getState() });\n\n        if (container.firstChild) {\n          container.firstChild.remove();\n        }\n\n        container.appendChild(el);\n      }\n    }\n  }\n\n  if (location.pathname == \"/web-storage\") {\n    goTo(\"/web-storage\");\n  } else {\n    handleRoute(location.pathname);\n  }\n  window.onpopstate = function (event) {\n    handleRoute(location.pathname);\n  };\n}\n","// --MAIN SCRIPT--\nimport { State } from \"./state\";\nimport { initCardComponent } from \"./components/cards\";\nimport { initRouter } from \"./router\";\n\n(function () {\n  initRouter(document.querySelector(\"#root\"));\n  initCardComponent();\n\n  document.querySelector(\".form-new-note\").addEventListener(\"submit\", (e) => {\n    e.preventDefault();\n    const value = e.target[0].value;\n    State.addNewNote(value);\n    e.target[0].value = \"\";\n  });\n})();\n","import { State } from \"../../state\";\nconst trash = require(\"url:../../assets/delete.svg\");\n\nexport function initCardComponent() {\n  class Card extends HTMLElement {\n    //Shadow DOM\n    shadow: any = this.attachShadow({ mode: \"open\" });\n    card: Element;\n\n    constructor() {\n      super();\n      this.render();\n\n      //Estilos\n      var style = document.createElement(\"style\");\n      style.textContent = `\n      *{\n        box-sizing:border-box;\n      }\n      .card{\n        background-color: #FFF599;\n        display: flex;\n        height: auto;\n        min-height: 211px;\n        width: 311px;\n        border-radius: 8px;\n        padding: 22px 13px;\n        margin: 20px 6px;\n        box-shadow: 2px 2px 5px #444444ee;\n      }\n      .card:hover{\n        cursor:pointer;\n      }\n      .card-active{\n        border: 3px solid #000;\n      }\n      .card__text{\n        flex-grow:1;\n      }\n      .task-done{\n        text-decoration:line-through;\n      }\n      .card__functions{\n        display:flex;\n        flex-direction: column;\n        justify-content: space-around;\n      }\n      .card__checkbox, .card__trash{\n        width: 21px;\n        height: 21px;\n      }\n      .card__trash {\n        display: none;\n      }\n      .show-trash{\n        display:block;\n      }\n      `;\n      this.shadow.appendChild(style);\n    }\n\n    render() {\n      const card = document.createElement(\"div\");\n\n      const shadow = this.shadow;\n      const text = this.textContent;\n      const id = this.getAttribute(\"id\");\n      const check = this.getAttribute(\"checked\");\n\n      let checkAttribute: string;\n      if (check == \"true\") {\n        checkAttribute = \"checked\";\n      } else {\n        checkAttribute = \"none\";\n      }\n\n      card.classList.add(\"card\");\n      card.setAttribute(\"id\", id);\n\n      //Content\n      card.innerHTML = `\n      <p class=\"card__text\">${text}</p>\n        <div class=\"card__functions\">\n        <input class=\"card__checkbox\" type=\"checkbox\" ${checkAttribute}>\n        <div class=\"card__trash\">\n          <img src=${trash}>\n        </div>\n        </div>\n        `;\n\n      const checkbox = card.querySelector(\".card__checkbox\");\n\n      if (check === \"true\") {\n        card.querySelector(\".card__text\").classList.add(\"task-done\");\n      } else if (check === \"false\") {\n        card.querySelector(\".card__text\").classList.remove(\"task-done\");\n      }\n\n      checkbox.addEventListener(\"change\", function (e) {\n        card.querySelector(\".card__text\").classList.toggle(\"task-done\");\n        State.checkedNote(Number(id), this.checked);\n      });\n\n      card.addEventListener(\"click\", (e) => {\n        card.querySelector(\".card__trash\").classList.toggle(\"show-trash\");\n        card.classList.toggle(\"card-active\");\n      });\n\n      card.querySelector(\".card__trash\").addEventListener(\"click\", () => {\n        State.deleteNote(Number(id));\n      });\n\n      shadow.appendChild(card);\n    }\n  }\n  customElements.define(\"card-note\", Card);\n}\n"],"names":["$3bf3b04a899cbbe9a92c99cd4cfcddb4$var$Notes","content1","id1","id","content","checked","$3bf3b04a899cbbe9a92c99cd4cfcddb4$export$9a41e7f313711121","data","JSON","parse","localStorage","getItem","listeners","getState","setState","setItem","stringify","this","cb","addNewNote","note","idGen","push","deleteNote","newState","filter","item","checkedNote","value","lastState","find","concat","id2","length","idValues","map","max","Math","suscribe","callback","$10da859f8926f997eca867931986be87$var$bundleURL","$10da859f8926f997eca867931986be87$var$getBaseURL","url","replace","$10da859f8926f997eca867931986be87$export$da289beea9c5b10d","Error","err","matches","stack","match","$10da859f8926f997eca867931986be87$var$getBundleURL","$ffa497609e7cef7c7b759fa0e33b6db3$exports","parcelRequire","getBundleURL","$709102443b82dcc07aca01db3d48f4b6$var$lastState","$709102443b82dcc07aca01db3d48f4b6$export$a6f333db524a734d","params","sort","a","b","div","document","createElement","className","style","textContent","lista","innerHTML","join","appendChild","container","querySelector","firstChild","remove","$9e876f2cce4bbc7ebf26ded1f367ede6$var$routes","path","component","handleRoute","route","r","test","el","location","pathname","history","pushState","window","onpopstate","event","$9e876f2cce4bbc7ebf26ded1f367ede6$export$f03b0d45d4202f55","Card","HTMLElement","super","shadow","attachShadow","mode","render","card","text","getAttribute","check","checkAttribute","classList","add","setAttribute","checkbox","addEventListener","e","toggle","Number","customElements","define","$d2f1ab41d29560c6e51aee7c7ebd609f$export$3dac145ab2ab0227","preventDefault","target"],"version":3,"file":"index.c8adbfb9.js.map"}